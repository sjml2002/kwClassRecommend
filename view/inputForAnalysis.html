<!DOCTYPE html>
<html lang="ko">
	<head>
		<title> SCP createProject </title>
		<meta charset="utf-8" content-type="application/json" />
	</head>

	<script>
		/* 세션 정보 확인
		window.onload = async function(){
            const Data = JSON.stringify({
				pageURL: "SessionVerify"
			});
			const url = "/controller/withDataPageRoute.php?data=" + Data;
            HttpRequest(url, function(resultData) {
                if(resultData !== "false") {
                    //정상적으로 로그인 되어있음
                    const writer = request.response;
                    document.getElementById("writer").innerHTML = writer;
                }
                else {
                    alert("로그인이 필요합니다.");
                    window.location.href = "/index.html";
                }
            });
            
		}
		*/

        function InfoSend() {
            const inputForm = document.getElementById("inputForm");

            const majorTarget = document.getElementById("majorBox");
            const majorValue = majorTarget.options[majorTarget.selectedIndex].value;
			const submajorTarget = document.getElementById("submajorBox");
            const submajorValue = submajorTarget.options[submajorTarget.selectedIndex].value;
			const yearTarget = document.getElementById("yearBox");
			const yearValue = yearTarget.options[yearTarget.selectedIndex].value;
			const semesterTarget = document.getElementById("semesterBox");
			const semesterValue = semesterTarget.options[semesterTarget.selectedIndex].value;

            const reqData = JSON.stringify({
				major: majorValue,
				submajor: submajorValue,
				year: yearValue,
				semester: semesterValue,
                pageURL: "classAnalysis",
                returnPageURL: "/index.html"
            });
            const url = "/controller/withDataPageRoute.php?data=" + reqData;
            HttpRequest(url, function(resultData) {
                if(resultData === "true") {
                    window.location.href = "/index.html";
                }
                else {
					console.log(resultData);
                    alert("실패... 다시 시도해주세요.");
                }
            });
        }
		
		//httpRequest로 데이터 보내기 (withDataPageRouting.php에만 적용)
        async function HttpRequest(url, callback){
            request = new XMLHttpRequest();
            request.open("GET", url, true);
            request.setRequestHeader("Content-type", "application/json");
            request.send(); //$_GET['data']
            //get response
            request.onreadystatechange = function() {
                if(request.readyState===XMLHttpRequest.DONE){
                    const returnData = request.response;
                    callback(returnData);
                }
            }
        }
	</script>

	<body>
		<h1> SCP createProject 페이지 </h1>
		<form id="inputForm">
            <div name="major"> 
                전공 선택하기:
                <select id="majorBox">
                    <option value="전자공학과"> 전자공학과 </option>
					<option value="전자통신공학과"> 전자통신공학과 </option>
					<option value="전자융합공학과"> 전자융합공학과 </option>
					<option value="전자재료공학과"> 전자재료공학과 </option>
					<option value="전기공학과"> 전기공학과 </option>
					<option value="로봇학부"> 로봇학부 </option>
					<option value="소프트웨어학부"> 소프트웨어학부 </option>
					<option value="컴퓨터정보공학부"> 컴퓨터정보공학부 </option>
					<option value="정보융합학부"> 정보융합학부 </option>
					<option value="화학공학과"> 화학공학과 </option>
					<option value="환경공학과"> 환경공학과 </option>
					<option value="건축공학과"> 건축공학과 </option>
					<option value="건축학과"> 건축학과 </option>
					<option value="수학과"> 수학과 </option>
					<option value="화학과"> 화학과 </option>
					<option value="전자바이오물리학과"> 전자바이오물리학과 </option>
					<option value="스포트융합과학과"> 스포트융합과학과 </option>
					<option value="정보콘텐츠학과"> 정보콘텐츠학과(야) </option>
					<option value="경영학부"> 경영학부 </option>
					<option value="국제통상학부"> 국제통상학부 </option>
					<option value="국어국문학과"> 국어국문학과 </option>
					<option value="영어산업학과"> 영어산업학과 </option>
					<option value="산업심리학과"> 산업심리학과 </option>
					<option value="미디어커뮤니케이션학부"> 미디어커뮤니케이션학부 </option>
					<option value="동북아문화산업학부"> 동북아문화산업학부 </option>
					<option value="행정학과"> 행정학과 </option>
					<option value="법학부"> 법학부 </option>
					<option value="국제학부"> 국제학부 </option>
					<option value="자산관리학과"> 자산관리학과(야) </option>
				</select>
			</div>
			<div name="submajor"> 
                복수/부/다전공이 있으시면 선택해주세요.
                <select id="submajorBox">
					<option value=""> 선택 </option>
                    <option value="전자공학과"> 전자공학과 </option>
					<option value="전자통신공학과"> 전자통신공학과 </option>
					<option value="전자융합공학과"> 전자융합공학과 </option>
					<option value="전자재료공학과"> 전자재료공학과 </option>
					<option value="전기공학과"> 전기공학과 </option>
					<option value="로봇학부"> 로봇학부 </option>
					<option value="소프트웨어학부"> 소프트웨어학부 </option>
					<option value="컴퓨터정보공학부"> 컴퓨터정보공학부 </option>
					<option value="정보융합학부"> 정보융합학부 </option>
					<option value="화학공학과"> 화학공학과 </option>
					<option value="환경공학과"> 환경공학과 </option>
					<option value="건축공학과"> 건축공학과 </option>
					<option value="건축학과"> 건축학과 </option>
					<option value="수학과"> 수학과 </option>
					<option value="화학과"> 화학과 </option>
					<option value="전자바이오물리학과"> 전자바이오물리학과 </option>
					<option value="스포트융합과학과"> 스포트융합과학과 </option>
					<option value="정보콘텐츠학과"> 정보콘텐츠학과(야) </option>
					<option value="경영학부"> 경영학부 </option>
					<option value="국제통상학부"> 국제통상학부 </option>
					<option value="국어국문학과"> 국어국문학과 </option>
					<option value="영어산업학과"> 영어산업학과 </option>
					<option value="산업심리학과"> 산업심리학과 </option>
					<option value="미디어커뮤니케이션학부"> 미디어커뮤니케이션학부 </option>
					<option value="동북아문화산업학부"> 동북아문화산업학부 </option>
					<option value="행정학과"> 행정학과 </option>
					<option value="법학부"> 법학부 </option>
					<option value="국제학부"> 국제학부 </option>
					<option value="자산관리학과"> 자산관리학과(야) </option>
				</select>
			</div>
			<div name="grade">
				학년 학기 선택하기: 
                <select id="yearBox">
                    <option value="1"> 1학년 </option>
					<option value="2"> 2학년 </option>
					<option value="3"> 3학년 </option>
					<option value="4"> 4학년 </option>
				</select>
				<select id="semesterBox">
                    <option value="1"> 1학기 </option>
					<option value="2"> 2학기 </option>
				</select>
			</div>
			<div name="test">
				사용자 유형 파악 테스트 결과 정보 받아오기 (추후 진행 예정)
			</div>
            <input type="button" value="강의 추천받으러 진짜 가기!!" onclick="InfoSend()"/>
		</form>
	</body>
</html>
